{% extends "base.html" %}

{% block scripts %}{{ block.super }}
   <script type="text/javascript">
     var basePath = '{% url index %}';
   </script>
  <script type="text/javascript" src="{% url appstatic "js/schedule.js" %}"></script>
{% endblock %}

{% load tabbing %}

{% block page_title %}myschedule{% endblock %}

{% block app_header %}
<a href="{% url index %}">myschedule</a>
{% endblock %}

{% block sections %}
<li class="{% selected ^$ %}{% selected ^show_courses/ %}{% selected ^show_sections/ %}"><a href="{% url index %}">Search</a></li>
{% if request.session.WorkingCart %}
  <li class="{% selected ^show_schedule/ %}{% selected ^display_cart/ %}"><a href="{% url show_schedule %}">Schedule</a></li>
{% endif %}
{% endblock %}

{% block body_class %}sidebar{% endblock %}
{% block sidebar %}
    {% if is_display_cart %}
      <h5>Schedule Actions</h5>
        <ul class='sidebar'>
        <li><a href="{% url save_schedule %}" title="Save this schedule">Save it!</a></li>
        <li><a class="open-window" href="#email" ref="email" dialog-title="Email Schedule" title="Email this schedule to yourself or a friend">Share it!</a></li>
        <li><a href="JavaScript:window.print();" title="Print this page">Print it!</a></li>
        </ul>
    {% endif %}
    <h5>Saved Schedules</h5>
      {% if request.session.SavedSchedules %}
        <ul class='sidebar'>
          {% for schedule in request.session.SavedSchedules %}
            <li><a href="{% url display_cart schedule.sections %}" title="Display schedule for {{ schedule.description }}">{{ schedule.description }}</a>
                <a href="{% url delete_schedule schedule.id %}" title="Delete saved schedule {{ schedule.description }}" class="delete-schedule">X</a>
            </li>
          {% endfor %}
        </ul>
      {% else %}
          {% ifequal user.is_authenticated 'True' %}
            <p><i>You have no saved schedules</i></p>
          {% else %}
            <p><i><a href="{% url login %}" title="Sign in with your CPCC Login">Sign in</a> to view saved schedules.</i></p>
          {% endifequal %}
      {% endif %}
    <h5>Recent Searches</h5>
      {% if request.session.RecentSearches %}
        <ul class='sidebar'>
          {% for search_text in request.session.RecentSearches %}
            <li><a href="{% url search search_text %}" title="Show search results for {{ search_text }}">{{ search_text }}</a></li>
          {% endfor %}
        </ul>
      {% else %}
        <p><i>No searches to display.</i></p>
      {% endif %}
{% endblock %}

