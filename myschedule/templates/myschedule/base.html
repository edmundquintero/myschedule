{% extends "base.html" %}

{% block scripts %}{{ block.super }}
   <script type="text/javascript">
     var basePath = '{% url index %}';
   </script>
  <script type="text/javascript" src="{% url appstatic "js/schedule.js" %}"></script>
{% endblock %}

{% load tabbing %}
{% load myschedule_filters %}

{% block page_title %}myschedule{% endblock %}

{% block app_header %}
<a href="{% url index %}">myschedule</a>
{% endblock %}

{% block sections %}
<li class="{% selected ^$ %}{% selected ^show_courses/ %}{% selected ^show_sections/ %}"><a href="{% url index %}">Search</a></li>
{% if request.session.WorkingCart or request.session.WorkingCart == "" %}
  <li class="{% selected ^show_schedule/ %}{% selected ^display_cart/ %}"><a href="{% url show_schedule %}">Schedule</a></li>
{% endif %}
{% endblock %}

{% block body_class %}sidebar{% endblock %}
{% block sidebar %}
    <h5>Schedule</h5>
      {% if request.session.Cart %}
        <ul class='sidebar'>
          {% for section in request.session.Cart %}
          <li>{{ section|format_section }}<a href="{% url delete_cartitem section %}" class="ui-icon ui-icon-trash"></a></li>
          {% endfor %}
        </ul>
      {% endif %}
      {% if not user.is_authenticated %}
            <p><i><a href="{% url login %}" title="Sign in with your CPCC Login">Sign in</a> to save schedule.</i></p>
      {% endif %}
    <h5>Recent Searches</h5>
      {% if request.session.RecentSearches %}
        <ul class='sidebar'>
          {% for search_text in request.session.RecentSearches %}
            <li><a href="{% url old_search search_text %}" title="Show search results for {{ search_text }}">{{ search_text }}</a></li>
          {% endfor %}
        </ul>
      {% else %}
        <p><i>No searches to display.</i></p>
      {% endif %}
{% endblock %}
{% block content %}
  {% include "myschedule/dialogs/save_cart.html" %}
{% endblock %}

