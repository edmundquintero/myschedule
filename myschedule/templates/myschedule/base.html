{% extends "base.html" %}

{% block scripts %}{{ block.super }}
   <script type="text/javascript">
     var basePath = '{% url index %}';
   </script>
  <script type="text/javascript" src="{% url appstatic "js/schedule.js" %}"></script>
{% endblock %}

{% load tabbing %}
{% load myschedule_filters %}

{% block page_title %}Schedule Builder{% endblock %}

{% block app_header %}
<a href="{% url index %}">Schedule Builder</a>
{% endblock %}

{% block login %}
  <div id="login">
  {% if request.user.is_authenticated %}
    Welcome back, <span id="user-name">{{ request.user.get_full_name }}</span> | <a href="{% url logout %}">Sign Out</a>
  {% else %}
    <a href="{% url schedule_login request.path %}">Sign In</a>
  {% endif %}
  {% url help as help %}
  {% block help_text %}
    | <a href="{{ help }}">Help</a>
  {% endblock %}
  </div>
  {% block help_icon %}
  <a href="{{ help }}"><img src="{% url static "3g/img/help_icon.png" %}" alt="Help Icon" id="help-icon"></a>
  {% endblock %}
{% endblock %}

{% block body_class %}sidebar{% endblock %}
{% block sidebar %}
    {% if not user.is_authenticated %}   
      <p><i><a href="{% url schedule_login request.path %}" title="Sign in with your CPCC Login">Sign in</a> to save or retrieve schedule.</i></p>
    {% endif %}
    <h5>Schedule</h5>
      {% if request.session.Cart %}
        <ul class='sidebar'>
          {% for section in request.session.Cart %}
          <li>{{ section|format_section }}<a href="{% url delete_cartitem section %}" class="ui-icon ui-icon-trash"></a></li>
          {% endfor %}
        </ul>
      {% endif %}
    <p><a href="{% url show_schedule %}" class="ui-button">View Full Schedule</a></p>
{% endblock %}
{% block content %}{{ block.super }} 
  {% include "myschedule/search.html" %}
{% endblock %}
