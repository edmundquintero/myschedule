{% extends "myschedule/base.html" %}

{% block page_title %}{{ block.super }} | Display Cart{% endblock %}

{% block content %}{{ block.super }}
{% if not user.is_authenticated %}
  <div class="message message-warning">
    To save schedules, you must <a href="{% url login %}">sign in</a>.
  </div>
{% else %}
  <div id="schedule-name" class="message message-notice">
    You are currently viewing saved schedule <i><span class="schedule-name"></span></i>.
  </div>
  <div id="unsaved-schedule" class="message message-warning">
    You are viewing an unsaved schedule!
  </div>
{% endif %}
{% if user.is_authenticated %}
  {% include "myschedule/dialogs/save.html" %}
  <a class="open-window ui-button" href="#save" ref="save" dialog-title="Save Schedule" title="Save this schedule">Save Schedule</a>
{% endif %}
<a class="open-window ui-button" href="#email" ref="email" dialog-title="Email Schedule" title="Email this schedule to yourself or a friend">Email Schedule</a>
<a href="JavaScript:window.print();" title="Print this page" class="ui-button">Print Schedule</a>
<table>
<thead>
  <tr>
    <th>Course</th>
    <th>Status</th>
    <th>Meeting Location & Times</th>
    <th>Instructor / Book</th>
    <th></th>
  </tr>
</thead>
<tbody>
{% for item in cartitems %}
  <tr class="{% cycle 'odd' 'even' %}">
    <td>{{ item.course_data.prefix }} - {{ item.course_data.number }} <i>{{ item.course_data.title }}</i><br/> {{ item.section_data.section }}</td>
    <td>seat(s)available</td>
    <td>From {{ item.section_data.start_date }} to {{ item.section_data.end_date }}</td>
    <td>{{ item.section_data.instructor_first_name }} {{ item.section_data.instructor_last_name }}<br/>
    {% if item.booklink %} <a class="open-window" ref="book" dialog-title="Book Information" href= "#book" booklink="{{ item.booklink }}">View Book Information</a>{% endif %}</td>
    <td><a class="ui-button" href="{% url delete_cartitem item.section_data.id %}">Remove</a></td>
  </tr>
{% endfor %}
</tbody>
</table>
{% include "myschedule/dialogs/book.html" %}
{% include "myschedule/dialogs/email.html" %}
{% endblock %}
